import{f as g,h as m,g as f,c as a,a as t,b as D,w as x,F as C,x as k,t as o,r as S,o as s,m as v,S as y}from"./index-CQcpGnB-.js";import{T as u}from"./ToastAlert-DHQ-cLHn.js";const P={class:"table-responsive"},B={class:"table table-striped table-bordered"},T={key:0},w=["textContent"],I=["textContent"],M=["textContent"],N=["textContent"],V={class:"text-center"},$=["onClick"],A=["onClick"],E={key:1},L={colspan:"6",class:"text-center"},h="sp2d",q={__name:"MainSP2DView",setup(j){const d=g(),l=m([]),r=m(!0);f(async()=>{console.log("onmounted sp2d"),l.value=await d.fetchData(h),r.value=!r.value});const p=async i=>{if((await y.fire({title:"Hapus Data?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",cancelButtonColor:"red"})).isConfirmed)try{await d.deleteItemById(h,i)?(u.fire({icon:"success",title:"Data berhasil dihapus"}),l.value=await d.fetchData(h)):u.fire({icon:"error",title:"Gagal menghapus data"})}catch(c){console.error("Error deleting item:",c),u.fire({icon:"error",title:"Terjadi kesalahan saat menghapus data"})}};return(i,e)=>{const c=S("router-link");return s(),a("div",null,[e[2]||(e[2]=t("h1",{class:"text-dark fw-bold mb-4"},"List Surat Perintah Pencairan Dana",-1)),D(c,{to:"/sp2d/create",class:"btn btn-primary mb-4",disabled:r.value},{default:x(()=>e[0]||(e[0]=[v(" Tambah Data ")])),_:1},8,["disabled"]),t("div",P,[t("table",B,[e[1]||(e[1]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No SP2D"),t("th",{scope:"col"},"Tanggal SP2D"),t("th",{scope:"col"},"Meta Anggaran"),t("th",{scope:"col"},"NO SPM"),t("th",{scope:"col",class:"text-center"},"Action")])],-1)),l.value.length>0?(s(),a("tbody",T,[(s(!0),a(C,null,k(l.value,(n,b)=>(s(),a("tr",{key:b},[t("td",{textContent:o(n.noSP2D)},null,8,w),t("td",{textContent:o(i.formatDate(n.tglSP2D))},null,8,I),t("td",{textContent:o(n.metaAnggaran)},null,8,M),t("td",{textContent:o(n.spm.noSPM)},null,8,N),t("td",V,[t("button",{class:"btn-danger btn btn-sm",onClick:_=>p(n.id)},"Hapus",8,$),t("button",{class:"btn-sm btn-warning btn",onClick:_=>i.$router.push(`/sp2d/${n.id}/edit`)}," Edit ",8,A)])]))),128))])):(s(),a("tbody",E,[t("tr",null,[t("td",L,o(r.value?"Loading Data...":"Data masih kosong"),1)])]))])])])}}};export{q as default};
