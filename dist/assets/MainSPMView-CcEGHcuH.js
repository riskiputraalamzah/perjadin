import{f,h,g,c as n,a as t,b as k,w as C,F as S,x as v,t as c,r as x,o as s,m as y,S as w}from"./index-Dlj3Nbua.js";import{T as u}from"./ToastAlert-BCaHB16n.js";const D={class:"table-responsive"},M={class:"table table-striped table-bordered"},T={key:0},B=["textContent"],P=["textContent"],I=["textContent"],N={class:"text-center"},V=["onClick"],$=["onClick"],E={key:1},L={colspan:"6",class:"text-center"},m="spm",q={__name:"MainSPMView",setup(j){const d=f(),l=h([]),r=h(!0);g(async()=>{console.log("onmounted spm"),l.value=await d.fetchData(m),r.value=!r.value});const b=async a=>{if((await w.fire({title:"Hapus Data?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",cancelButtonColor:"red"})).isConfirmed)try{await d.deleteItemById(m,a)?(u.fire({icon:"success",title:"Data berhasil dihapus"}),l.value=await d.fetchData(m)):u.fire({icon:"error",title:"Gagal menghapus data"})}catch(i){console.error("Error deleting item:",i),u.fire({icon:"error",title:"Terjadi kesalahan saat menghapus data"})}};return(a,e)=>{const i=x("router-link");return s(),n("div",null,[e[2]||(e[2]=t("h1",{class:"text-dark fw-bold mb-4"},"List Surat Perintah Membayar",-1)),k(i,{to:"/spm/create",class:"btn btn-primary mb-4",disabled:r.value},{default:C(()=>e[0]||(e[0]=[y(" Tambah Data ")])),_:1},8,["disabled"]),t("div",D,[t("table",M,[e[1]||(e[1]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No SPM"),t("th",{scope:"col"},"Tanggal SPM"),t("th",{scope:"col"},"Nilai ST"),t("th",{scope:"col",class:"text-center"},"Action")])],-1)),l.value.length>0?(s(),n("tbody",T,[(s(!0),n(S,null,v(l.value,(o,p)=>(s(),n("tr",{key:p},[t("td",{textContent:c(o.noSPM)},null,8,B),t("td",{textContent:c(a.formatDate(o.tglSPM))},null,8,P),t("td",{textContent:c(a.formatRupiah(o.nilaiSPM))},null,8,I),t("td",N,[t("button",{class:"btn-danger btn btn-sm",onClick:_=>b(o.id)},"Hapus",8,V),t("button",{class:"btn-sm btn-warning btn",onClick:_=>a.$router.push(`/spm/${o.id}/edit`)}," Edit ",8,$)])]))),128))])):(s(),n("tbody",E,[t("tr",null,[t("td",L,c(r.value?"Loading Data...":"Data masih kosong"),1)])]))])])])}}};export{q as default};
