import{f as B,x as D,h as g,g as I,c as m,a as t,F as S,y as N,t as d,b as j,w as E,o as b,l as v,v as h,d as M,S as V}from"./index-o2M0dMQQ.js";import{_ as G}from"./ModalItem-tP6Ll6qu.js";import{T as n}from"./ToastAlert-OWsq48F2.js";const J=["disabled"],U={class:"table-responsive"},$={class:"table table-striped table-bordered"},F={key:0},L=["textContent"],A=["textContent"],q=["textContent"],H=["textContent"],O=["textContent"],Y={class:"text-center"},z=["onClick"],K=["onClick"],Q={key:1},R={colspan:"6",class:"text-center"},W={class:"mb-3"},X={class:"mb-3"},Z={class:"mb-3"},tt={class:"mb-3"},i="pegawai",it={__name:"MainPegawaiView",setup(at){const f=B(),w=D(),o=g({namaPegawai:"",nip:"",golongan:"",jabatan:""}),c=g([]),s=g(!0),x=async()=>{c.value=await f.fetchData(i),w.dataPegawai=c.value};I(async()=>{if(w.dataPegawai){s.value=!s.value,c.value=w.dataPegawai;return}await x(),s.value=!s.value});const P=()=>o.value.namaPegawai?o.value.nip?o.value.golongan?o.value.jabatan?!0:(n.fire({icon:"error",title:"Jabatan harus diisi"}),!1):(n.fire({icon:"error",title:"Golongan harus diisi"}),!1):(n.fire({icon:"error",title:"NIP harus diisi"}),!1):(n.fire({icon:"error",title:"Nama Pegawai harus diisi"}),!1),y=async({actionType:l})=>{if(P())try{const a=JSON.parse(JSON.stringify(o.value));l==="add"?(await f.addItem(i,a),n.fire({icon:"success",title:"Data Pegawai berhasil ditambahkan"})):l==="edit"&&(await f.updateData(i,"id",a.id,a),n.fire({icon:"success",title:"Data Pegawai berhasil diubah"})),await x(i),_();const e=document.getElementById("staticBackdrop"),u=window.bootstrap.Modal.getInstance(e);u&&u.hide();const p=document.querySelector(".modal-backdrop");p&&p.remove()}catch(a){console.error("Error:",a),n.fire({icon:"error",title:"Terjadi kesalahan"})}},_=()=>{o.value={namaPegawai:"",nip:"",golongan:"",jabatan:""}},C=async l=>{if((await V.fire({title:`Hapus Data ${i}?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",cancelButtonColor:"red"})).isConfirmed)try{await f.deleteItemById(i,l)?(n.fire({icon:"success",title:`Data ${i} berhasil dihapus`}),await x(i)):n.fire({icon:"error",title:"Gagal menghapus data"})}catch(e){console.error("Error deleting item:",e),n.fire({icon:"error",title:"Terjadi kesalahan saat menghapus data"})}},T=()=>{_(),r.value={title:"Tambah Data Pegawai",confirmButtonText:"Simpan",actionType:"add",data:o.value}},k=l=>{o.value={...l},r.value={title:"Edit Data Pegawai",confirmButtonText:"Update",actionType:"edit",data:o.value}},r=g({title:"Tambah Data Pegawai",confirmButtonText:"Simpan",actionType:"add",data:{}});return(l,a)=>(b(),m("div",null,[a[9]||(a[9]=t("h1",{class:"text-dark fw-bold mb-4"},"List Pegawai",-1)),t("button",{type:"button",class:"btn btn-primary mb-4",onClick:T,disabled:s.value,"data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"}," Tambah Data ",8,J),t("div",U,[t("table",$,[a[4]||(a[4]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama"),t("th",{scope:"col"},"NIP"),t("th",{scope:"col"},"Golongan"),t("th",{scope:"col"},"Jabatan"),t("th",{scope:"col",class:"text-center"},"Action")])],-1)),c.value.length>0?(b(),m("tbody",F,[(b(!0),m(S,null,N(c.value,(e,u)=>(b(),m("tr",{key:u},[t("td",{textContent:d(u+1)},null,8,L),t("td",{textContent:d(e.namaPegawai)},null,8,A),t("td",{textContent:d(e.nip)},null,8,q),t("td",{textContent:d(e.golongan)},null,8,H),t("td",{textContent:d(e.jabatan)},null,8,O),t("td",Y,[t("button",{class:"btn-danger btn btn-sm",onClick:p=>C(e.id)},"Hapus",8,z),t("button",{"data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",class:"btn-sm btn-warning btn",onClick:p=>k(e)}," Edit ",8,K)])]))),128))])):(b(),m("tbody",Q,[t("tr",null,[t("td",R,d(s.value?"Loading Data...":"Data masih kosong"),1)])]))])]),j(G,{title:r.value.title,confirmButtonText:r.value.confirmButtonText,actionType:r.value.actionType,data:r.value.data,onConfirm:y},{body:E(()=>[t("form",{onSubmit:M(y,["prevent"])},[t("div",W,[a[5]||(a[5]=t("label",{for:"namaPegawai",class:"form-label"},"Nama Pegawai",-1)),v(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.namaPegawai=e),type:"text",class:"form-control",id:"namaPegawai"},null,512),[[h,o.value.namaPegawai]])]),t("div",X,[a[6]||(a[6]=t("label",{for:"NIP",class:"form-label"},"NIP",-1)),v(t("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.nip=e),type:"text",class:"form-control",id:"NIP"},null,512),[[h,o.value.nip]])]),t("div",Z,[a[7]||(a[7]=t("label",{for:"Golongan",class:"form-label"},"Golongan",-1)),v(t("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.golongan=e),type:"text",class:"form-control",id:"Golongan"},null,512),[[h,o.value.golongan]])]),t("div",tt,[a[8]||(a[8]=t("label",{for:"jabatan",class:"form-label"},"Jabatan",-1)),v(t("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.jabatan=e),type:"text",class:"form-control",id:"jabatan"},null,512),[[h,o.value.jabatan]])])],32)]),_:1},8,["title","confirmButtonText","actionType","data"])]))}};export{it as default};
