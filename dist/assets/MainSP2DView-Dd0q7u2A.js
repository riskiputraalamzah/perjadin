import{f as D,h as b,x as S,g as C,c as o,a as t,b as v,w as x,F as k,y,t as l,r as P,o as r,m as B,S as T}from"./index-xVDuUUEs.js";import{T as u}from"./ToastAlert-uFlgKPi0.js";const w={class:"table-responsive"},M={class:"table table-striped table-bordered"},I={key:0},N=["textContent"],A=["textContent"],V=["textContent"],$=["textContent"],E={class:"text-center"},L=["onClick"],j=["onClick"],F={key:1},H={colspan:"6",class:"text-center"},h="sp2d",Y={__name:"MainSP2DView",setup(q){const m=D(),s=b([]),a=b(!0),d=S(),p=async()=>{s.value=await m.fetchData(h),d.dataSP2D=s.value};C(async()=>{if(d.dataSP2D){a.value=!a.value,s.value=d.dataSP2D;return}await p(),a.value=!a.value});const _=async i=>{if((await T.fire({title:"Hapus Data?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",cancelButtonColor:"red"})).isConfirmed)try{await m.deleteItemById(h,i)?(u.fire({icon:"success",title:"Data berhasil dihapus"}),await p(h)):u.fire({icon:"error",title:"Gagal menghapus data"})}catch(c){console.error("Error deleting item:",c),u.fire({icon:"error",title:"Terjadi kesalahan saat menghapus data"})}};return(i,e)=>{const c=P("router-link");return r(),o("div",null,[e[2]||(e[2]=t("h1",{class:"text-dark fw-bold mb-4"},"List Surat Perintah Pencairan Dana",-1)),v(c,{to:"/sp2d/create",class:"btn btn-primary mb-4",disabled:a.value},{default:x(()=>e[0]||(e[0]=[B(" Tambah Data ")])),_:1},8,["disabled"]),t("div",w,[t("table",M,[e[1]||(e[1]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No SP2D"),t("th",{scope:"col"},"Tanggal SP2D"),t("th",{scope:"col"},"Meta Anggaran"),t("th",{scope:"col"},"NO SPM"),t("th",{scope:"col",class:"text-center"},"Action")])],-1)),s.value.length>0?(r(),o("tbody",I,[(r(!0),o(k,null,y(s.value,(n,g)=>(r(),o("tr",{key:g},[t("td",{textContent:l(n.noSP2D)},null,8,N),t("td",{textContent:l(i.formatDate(n.tglSP2D))},null,8,A),t("td",{textContent:l(n.metaAnggaran)},null,8,V),t("td",{textContent:l(n.spm.noSPM)},null,8,$),t("td",E,[t("button",{class:"btn-danger btn btn-sm",onClick:f=>_(n.id)},"Hapus",8,L),t("button",{class:"btn-sm btn-warning btn",onClick:f=>i.$router.push(`/sp2d/${n.id}/edit`)}," Edit ",8,j)])]))),128))])):(r(),o("tbody",F,[t("tr",null,[t("td",H,l(a.value?"Loading Data...":"Data masih kosong"),1)])]))])])])}}};export{Y as default};
