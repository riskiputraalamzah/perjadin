import{f as M,p as x,h as r,g as V,y as P,c as n,a as e,b as _,w as C,l as u,v as g,n as S,s as d,A as F,F as T,x as N,z as D,r as j,o,m as B,t as U}from"./index-CQcpGnB-.js";import{T as h}from"./ToastAlert-DHQ-cLHn.js";const $={"aria-label":"breadcrumb"},z={class:"breadcrumb"},I={class:"breadcrumb-item"},O={class:"row"},R={class:"col-md-6 col-lg-4"},E={key:0,class:"invalid-feedback"},L={class:"col-md-6 col-lg-4"},q={key:0,class:"invalid-feedback"},G={class:"col-md-6 col-lg-4"},H={key:0,class:"invalid-feedback"},J={class:"col-md-6 col-lg-4"},K=["textContent","value"],Q={key:0,class:"invalid-feedback"},W=["disabled"],aa={__name:"CreateView",setup(X){const v=M(),f=x(),p=r([]),c=r([]),l=r({noSP2D:"",tglSP2D:"",metaAnggaran:"",spm:{}}),s=r({noSP2D:!1,tglSP2D:!1,metaAnggaran:!1,spm:!1});V(async()=>{c.value=await v.fetchData("sp2d"),p.value=await v.fetchData("spm")});const k=P(()=>p.value.filter(i=>!c.value.some(a=>a.spm.noSPM===i.noSPM))),m=r(!1),b=P({get(){return l.value.noSP2D!==""&&l.value.tglSP2D!==""&&l.value.metaAnggaran!==""&&Object.keys(l.value.spm).length!==0},set(i){m.value=i}}),A=async()=>{if(!b.value)return;m.value=!0,l.value.spm=D(l.value.spm);const i={...D(l.value)};await v.addItem("sp2d",i),m.value=!1,h.fire({icon:"success",title:"Data Berhasil ditambahkan"}),f.push("/sp2d")};return(i,a)=>{const y=j("router-link");return o(),n("div",null,[e("nav",$,[e("ol",z,[e("li",I,[_(y,{to:{name:"sp2d"}},{default:C(()=>a[7]||(a[7]=[B("SP2D")])),_:1})]),a[8]||(a[8]=e("li",{class:"breadcrumb-item","aria-current":"page"},"Tambah Data",-1))])]),a[14]||(a[14]=e("h1",{class:"text-dark fw-bold mb-4"},"Tambah Data SP2D",-1)),e("div",O,[e("div",R,[e("div",null,[a[9]||(a[9]=e("label",{for:"noSP2D",class:"form-label"},"No SP2D",-1)),u(e("input",{type:"text",class:S(["form-control",{"is-invalid":s.value.noSP2D&&l.value.noSP2D===""}]),"onUpdate:modelValue":a[0]||(a[0]=t=>l.value.noSP2D=t),id:"noSP2D",onFocus:a[1]||(a[1]=t=>s.value.noSP2D=!0)},null,34),[[g,l.value.noSP2D]]),s.value.noSP2D&&l.value.noSP2D===""?(o(),n("div",E," No SP2D wajib diisi. ")):d("",!0)])]),e("div",L,[e("div",null,[a[10]||(a[10]=e("label",{for:"tglSP2D",class:"form-label"},"Tanggal SP2D",-1)),u(e("input",{type:"date",class:S(["form-control",{"is-invalid":s.value.tglSP2D&&l.value.tglSP2D===""}]),"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.tglSP2D=t),id:"tglSP2D",onFocus:a[3]||(a[3]=t=>s.value.tglSP2D=!0)},null,34),[[g,l.value.tglSP2D]]),s.value.tglSP2D&&l.value.tglSP2D===""?(o(),n("div",q," Tanggal SP2D wajib diisi. ")):d("",!0)])]),e("div",G,[e("div",null,[a[11]||(a[11]=e("label",{for:"metaAnggaran",class:"form-label"},"Meta Anggaran",-1)),u(e("input",{type:"text",class:S(["form-control",{"is-invalid":s.value.metaAnggaran&&l.value.metaAnggaran===""}]),"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.metaAnggaran=t),id:"metaAnggaran",onFocus:a[5]||(a[5]=t=>s.value.metaAnggaran=!0)},null,34),[[g,l.value.metaAnggaran]]),s.value.metaAnggaran&&l.value.metaAnggaran===""?(o(),n("div",H," Meta Anggaran wajib diisi. ")):d("",!0)])]),e("div",J,[e("div",null,[a[13]||(a[13]=e("label",{for:"noSPM",class:"form-label"},"Meta Anggaran",-1)),u(e("select",{class:"form-select",id:"noSPM","onUpdate:modelValue":a[6]||(a[6]=t=>l.value.spm=t)},[a[12]||(a[12]=e("option",{selected:"",disabled:""},"Pilih Salah Satu",-1)),(o(!0),n(T,null,N(k.value,(t,w)=>(o(),n("option",{key:w,textContent:U(t.noSPM),value:t},null,8,K))),128))],512),[[F,l.value.spm]]),s.value.spm&&Object.keys(l.value.value.spm).length===0?(o(),n("div",Q," No SPM wajib dipilih. ")):d("",!0)])])]),e("button",{onClick:A,class:"btn btn-primary mt-4",disabled:!b.value}," Simpan ",8,W)])}}};export{aa as default};
