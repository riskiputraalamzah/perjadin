import{x,f as V,q as _,h as r,g as C,y as b,r as F,o,c as n,a as e,b as N,w as T,m as u,v as g,n as S,s as d,A as j,F as B,j as U,z as D,p as h,t as O}from"./index-BdjIFSqz.js";import{T as $}from"./ToastAlert-B6CVaos9.js";const z={"aria-label":"breadcrumb"},I={class:"breadcrumb"},R={class:"breadcrumb-item"},q={class:"row gy-3"},E={class:"col-md-6 col-lg-4"},L={key:0,class:"invalid-feedback"},G={class:"col-md-6 col-lg-4"},H={key:0,class:"invalid-feedback"},J={class:"col-md-6 col-lg-4"},K={key:0,class:"invalid-feedback"},Q={class:"col-md-6 col-lg-4"},W=["textContent","value"],X={key:0,class:"invalid-feedback"},Y=["disabled"],ta={__name:"CreateView",setup(Z){const f=x(),v=V(),k=_(),c=r([]),p=r([]),t=r({noSP2D:"",tglSP2D:"",metaAnggaran:"",spm:{}}),s=r({noSP2D:!1,tglSP2D:!1,metaAnggaran:!1,spm:!1});C(async()=>{p.value=await v.fetchData("sp2d"),c.value=await v.fetchData("spm")});const y=b(()=>c.value.filter(i=>!p.value.some(a=>a.spm.noSPM===i.noSPM))),m=r(!1),P=b({get(){return t.value.noSP2D!==""&&t.value.tglSP2D!==""&&t.value.metaAnggaran!==""&&Object.keys(t.value.spm).length!==0},set(i){m.value=i}}),A=async()=>{if(!P.value)return;m.value=!0,t.value.spm=D(t.value.spm);const i={...D(t.value)};await v.addItem("sp2d",i),m.value=!1,$.fire({icon:"success",title:"Data Berhasil ditambahkan"}),f.dataSP2D=null,k.push("/sp2d")};return(i,a)=>{const M=F("router-link");return o(),n("div",null,[e("nav",z,[e("ol",I,[e("li",R,[N(M,{to:{name:"sp2d"}},{default:T(()=>a[7]||(a[7]=[h("SP2D")])),_:1})]),a[8]||(a[8]=e("li",{class:"breadcrumb-item","aria-current":"page"},"Tambah Data",-1))])]),a[14]||(a[14]=e("h1",{class:"text-dark fw-bold mb-4"},"Tambah Data SP2D",-1)),e("div",q,[e("div",E,[e("div",null,[a[9]||(a[9]=e("label",{for:"noSP2D",class:"form-label"},"No SP2D",-1)),u(e("input",{type:"text",class:S(["form-control",{"is-invalid":s.value.noSP2D&&t.value.noSP2D===""}]),"onUpdate:modelValue":a[0]||(a[0]=l=>t.value.noSP2D=l),id:"noSP2D",onFocus:a[1]||(a[1]=l=>s.value.noSP2D=!0)},null,34),[[g,t.value.noSP2D]]),s.value.noSP2D&&t.value.noSP2D===""?(o(),n("div",L," No SP2D wajib diisi. ")):d("",!0)])]),e("div",G,[e("div",null,[a[10]||(a[10]=e("label",{for:"tglSP2D",class:"form-label"},"Tanggal SP2D",-1)),u(e("input",{type:"date",class:S(["form-control",{"is-invalid":s.value.tglSP2D&&t.value.tglSP2D===""}]),"onUpdate:modelValue":a[2]||(a[2]=l=>t.value.tglSP2D=l),id:"tglSP2D",onFocus:a[3]||(a[3]=l=>s.value.tglSP2D=!0)},null,34),[[g,t.value.tglSP2D]]),s.value.tglSP2D&&t.value.tglSP2D===""?(o(),n("div",H," Tanggal SP2D wajib diisi. ")):d("",!0)])]),e("div",J,[e("div",null,[a[11]||(a[11]=e("label",{for:"metaAnggaran",class:"form-label"},"Meta Anggaran",-1)),u(e("input",{type:"text",class:S(["form-control",{"is-invalid":s.value.metaAnggaran&&t.value.metaAnggaran===""}]),"onUpdate:modelValue":a[4]||(a[4]=l=>t.value.metaAnggaran=l),id:"metaAnggaran",onFocus:a[5]||(a[5]=l=>s.value.metaAnggaran=!0)},null,34),[[g,t.value.metaAnggaran]]),s.value.metaAnggaran&&t.value.metaAnggaran===""?(o(),n("div",K," Meta Anggaran wajib diisi. ")):d("",!0)])]),e("div",Q,[e("div",null,[a[13]||(a[13]=e("label",{for:"noSPM",class:"form-label"},"NO SPM",-1)),u(e("select",{class:"form-select",id:"noSPM","onUpdate:modelValue":a[6]||(a[6]=l=>t.value.spm=l)},[a[12]||(a[12]=e("option",{selected:"",disabled:""},"Pilih Salah Satu",-1)),(o(!0),n(B,null,U(y.value,(l,w)=>(o(),n("option",{key:w,textContent:O(l.noSPM),value:l},null,8,W))),128))],512),[[j,t.value.spm]]),s.value.spm&&Object.keys(t.value.value.spm).length===0?(o(),n("div",X," No SPM wajib dipilih. ")):d("",!0)])])]),e("button",{onClick:A,class:"btn btn-primary mt-4",disabled:!P.value}," Simpan ",8,Y)])}}};export{ta as default};
